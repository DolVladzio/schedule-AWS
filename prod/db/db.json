{
	"aws_region": "eu-central-1",
	"aws_backup_vault_name": "postgres-db-backup-vault",

	"aws_backup_plan": [
		{
			"name": "postgres-db-backup-plan",
			"rule_name": "daily-rds-backup",
			"target_vault_name": "postgres-db-backup-vault",
			"schedule": "cron(0 5 * * ? *)",
			"start_window": 60,
			"completion_window": 180,
			"delete_after": 7

		}
	],

	"aws_backup_selection": [
		{
			"name": "rds-backup-selection",
			"backup_plan_id": "postgres-db-backup-plan",
			"resources": [
				"postgresql-db"
			]
		}
	],

	"secret_manager": [
		{
			"name": "postgresql-db-credentials",
			"username": "postgres",
			"password": "postgres"
		}
	],

	"db_instances": [
		{
			"name": "postgresql-db",
			"engine": "postgres",
			"engine_version": "17.5",
			"instance_class": "db.t3.micro",
			"allocated_storage": 20,
			"max_allocated_storage": 100,
			"storage_type": "gp3",
			"multi_az": false,
			"publicly_accessible": false,
			"storage_encrypted": true,

			"db_name": "maindb",
			"port": 5432,
			"secret_manager_name": "postgresql-db-credentials",
			
			"aws_db_subnet_group_name": "private-db-subnets",
			"subnet_group_name": [
				"vpc-db-private-subnet-1",
				"vpc-db-private-subnet-2"
			],
			"vpc_security_groups": [
				"db-sg"
			],
			"backup_retention_period": 7,
			"backup_window": "03:00-04:00",
			"maintenance_window": "sun:04:00-sun:05:00",
			"deletion_protection": false,
			"skip_final_snapshot": true,
			"final_snapshot_identifier": "postgresql-db-final-snapshot",
			"monitoring_interval": 0,
			"performance_insights_enabled": true,
			"tags": { "db-subnets": "db-subnets", "db": "postgresql-db" }
		}
	]
}